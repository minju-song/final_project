<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link th:href="@{/user/css/trade.css}" rel="stylesheet" type="text/css">
</head>
<body>
	<div layout:fragment="content">
		<div class="container">
			<div class="row centerwrap">
				<!-- 사진 슬라이더 -->
				<div id="carouselExampleControlsNoTouching" class="carousel slide" data-touch="false" data-interval="false">
				  <div class="carousel-inner">
				    <div class="carousel-item active">
				      <img src="/user/images/person.jfif" class="d-block w-100" alt="...">
				    </div>
				    <div class="carousel-item">
				      <img src="/user/images/person.jfif" class="d-block w-100" alt="...">
				    </div>
				    <div class="carousel-item">
				      <img src="/user/images/person.jfif" class="d-block w-100" alt="...">
				    </div>
				  </div>
				  <img class="heart" id="heart" th:src="@{/user/images/trade/fill-heart.png}">
				  <button class="carousel-control-prev" type="button" data-target="#carouselExampleControlsNoTouching" data-slide="prev">
				    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
				    <span class="sr-only">Previous</span>
				  </button>
				  <button class="carousel-control-next" type="button" data-target="#carouselExampleControlsNoTouching" data-slide="next">
				    <span class="carousel-control-next-icon" aria-hidden="true"></span>
				    <span class="sr-only">Next</span>
				  </button>
				</div>
				<!-- 상품정보 -->
				<div class="col-lg-6">
					<div class="product_content">
						<div class="row watchwrap bottomdown10">
							<div class="heartNviews silverColor" th:text="|관심 ${heartCount.heartCount} │ 조회수 ${tradeInfo.views} │ ${#dates.format(tradeInfo.writeDate, 'yyyy-MM-dd')}|"></div>
							<div class="report silverColor">신고하기</div>
						</div>
						<div class="row">
							<div class="tradeType bottomdown10"><p th:text="${tradeInfo.tradeType}"></p></div>
							<div class="tradeTitle bottomdown" th:text="${tradeInfo.title}"></div>
						</div>
						<div class="tradeCategory bottomdown10">
							<span th:text="|카테고리 : ${tradeInfo.tradeCategory}|"></span>
						</div>
						<div class="row bottomwrap watchwrap">
							<div class="tradePrice">
								<p th:text="|${#numbers.formatInteger(tradeInfo.price, 0, 'COMMA')}원|"></p>
							</div>
							<div>
								<div class="pay insertbutton">
									<p>약속잡기</p>
								</div>
								<div class="pay insertbutton" th:if="${tradeInfo.paymentType == 'TC2'}">
									<p><img class="holoPay" id="holoPay" th:src="@{/user/images/trade/piggy-bank.svg}"> 홀로페이</p>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div><hr>
			<div class="row bottomdown10 margins">
				<img src="/user/images/person.jfif" alt="Profile" class="rounded-circle">
				<div class="tradeCategory bottomdown">
					<span class="nickName" th:text="${tradeInfo.tradeCategory}"></span>
				</div>
			</div>
			<div class="tradeCategory bottomdown margins" style="margin-bottom: 50px">
				<span th:text="${tradeInfo.description}"></span>
			</div><hr>
			<div class="col-12 bottomdown30">
                <div class="input-group mb-3 openKakao">
                	<span class="input-group-text" id="openKakao">오픈 카카오톡</span>
                  	<p class="form-control" th:text="${tradeInfo.openKakao}"></p>
                </div>
            </div>
            <div class="bottomdown30" id="map" style="width:100%;height:350px;"></div>
            <div class="col-md-12 writeInput buttonFrom">
              <button type="reset" class="btn btn-secondary">수정</button>
              <button type="submit" class="btn btn-primary">삭제</button>
            </div>
        </div>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=App Key 넣거라~"></script>
		<script>
			var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
			    mapOption = { 
			        center: new kakao.maps.LatLng(`[[${tradeInfo.latitude}]]`, `[[${tradeInfo.longitude}]]`), // 지도의 중심좌표
			        level: 3 // 지도의 확대 레벨
			    };
			
			var map = new kakao.maps.Map(mapContainer, mapOption);
			
			// 마커가 표시될 위치입니다 
			var markerPosition  = new kakao.maps.LatLng(`[[${tradeInfo.latitude}]]`, `[[${tradeInfo.longitude}]]`); 
			
			// 마커를 생성합니다
			var marker = new kakao.maps.Marker({
			    position: markerPosition
			});
			
			// 마커가 지도 위에 표시되도록 설정합니다
			marker.setMap(map);
			
			var iwContent = '<div style="padding:5px;">[[${tradeInfo.tradePlace}]] <br><a href="https://map.kakao.com/link/map/[[${tradeInfo.tradePlace}]],[[${tradeInfo.latitude}]], [[${tradeInfo.longitude}]]" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/[[${tradeInfo.tradePlace}]],[[${tradeInfo.latitude}]], [[${tradeInfo.longitude}]]" style="color:blue" target="_blank">길찾기</a></div>', // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
			    iwPosition = new kakao.maps.LatLng(`[[${tradeInfo.latitude}]]`, `[[${tradeInfo.longitude}]]`); //인포윈도우 표시 위치입니다
			
			// 인포윈도우를 생성합니다
			var infowindow = new kakao.maps.InfoWindow({
			    position : iwPosition, 
			    content : iwContent 
			});
			  
			// 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
			infowindow.open(map, marker); 
		</script>
	</div>
</body>
</html>

